<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Emotion Diary{% endblock %}</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ko.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/navigation.css') }}">
    <script src="{{ url_for('static', filename='js/theme_loader.js') }}"></script>
    {% block head %}{% endblock %}
</head>
<body class="{% block body_class %}{% endblock %}">
    <div id="transition-curtain"></div>

    {% if 'user_id' in session or logged_in %}
    <nav class="active-{{ request.endpoint.replace('.', '-') if request.endpoint else '' }}">
        <ul>
            <li>
                <a href="{{ url_for('main.home') }}" class="{{ 'active' if request.endpoint == 'main.home' else '' }}">
                    <svg><use xlink:href="#home-icon"></use></svg>
                </a>
            </li>
        </ul>
        <ul>
            <li>
                <a href="{{ url_for('main.my_diary') }}" class="{{ 'active' if request.endpoint == 'main.my_diary' else '' }}">
                    <svg><use xlink:href="#bookmark-icon"></use></svg>
                </a>
            </li>
        </ul>
        <ul>
            <li>
                 <a href="{{ url_for('main.mypage') }}" class="{{ 'active' if request.endpoint == 'main.mypage' else '' }}">
                    <svg><use xlink:href="#user-icon"></use></svg>
                </a>
            </li>
        </ul>
        <ul>
            <li>
                 <a href="{{ url_for('auth.logout') }}">
                    <svg><use xlink:href="#logout-icon"></use></svg>
                </a>
            </li>
        </ul>
        <div class="tubelight">
            <div class="light-ray"></div>
        </div>
    </nav>
    {% endif %}

    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
        <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="logout-icon">
            <path d="M16 13v-2h-5v-2h5v-2l3 3-3 3zm-8 4h-6v-18h6v2h-4v14h4v2z"/>
        </symbol>
        <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="home-icon">
            <path d="M13.1428571,14.5 C13.6571429,14.5 14,14.175507 14,13.6887676 L14,6.38767551 C14,6.14430577 13.9142857,5.90093604 13.6571429,5.73868955 L8.51428571,1.6825273 C8.17142857,1.43915757 7.74285714,1.43915757 7.4,1.6825273 L2.25714286,5.73868955 C2.08571429,5.90093604 2,6.14430577 2,6.38767551 L2,13.6887676 C2,14.175507 2.34285714,14.5 2.85714286,14.5 L13.1428571,14.5 Z M5.42857143,12.8775351 L3.71428571,12.8775351 L3.71428571,6.79329173 L8,3.38611544 L12.2857143,6.79329173 L12.2857143,12.8775351 L10.5714286,12.8775351 L5.42857143,12.8775351 Z"></path>
        </symbol>
        <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="bookmark-icon">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M7 3H17C18.1 3 19 3.89999 19 5V21L12 18L5 21V5C5 3.89999 5.90002 3 7 3ZM12 15.82L17 18V5H7V18L12 15.82Z" />
        </symbol>
        <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 570" id="user-icon">
            <path d="M313.6 304c-28.7 0-42.5 16-89.6 16-47.1 0-60.8-16-89.6-16C60.2 304 0 364.2 0 438.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-25.6c0-74.2-60.2-134.4-134.4-134.4zM400 464H48v-25.6c0-47.6 38.8-86.4 86.4-86.4 14.6 0 38.3 16 89.6 16 51.7 0 74.9-16 89.6-16 47.6 0 86.4 38.8 86.4 86.4V464zM224 288c79.5 0 144-64.5 144-144S303.5 0 224 0 80 64.5 80 144s64.5 144 144 144zm0-240c52.9 0 96 43.1 96 96s-43.1 96-96 96-96-43.1-96-96 43.1-96 96-96z" />
        </symbol>
    </svg>

    <main class="container">
        {% block content %}{% endblock %}
    </main>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
    <script src="{{ url_for('static', filename='js/navigation.js') }}"></script>
    {% block scripts %}{% endblock %}
</body>
</html>