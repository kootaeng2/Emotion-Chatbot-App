# 📖 개발 일기 (DevLog)

> Emotion Chatbot 프로젝트의 개발 과정, 기술적 고민, 그리고 해결 방법을 기록합니다.

---
## 🚀 새로운 아이디어 및 개발 예정 (Upcoming Tasks)

1.  **달력 디자인 개선:** 투명 스타일에서 가독성 높은 '모던 카드(Modern Card)' 스타일로 변경.
2.  **감정 이모지 톤 매칭:** 저장 애니메이션 구슬(Orb) 색상을 감정별 분위기에 맞게 세부 조정.
3.  **용어 직관화:** 추천 카테고리 명칭 변경 ('수용/전환' → **'공감/환기'**) 및 관련 로직 동기화.
4.  **저장 애니메이션 고도화:** 구슬이 통통 튀기다(Bouncing) '나의 일기' 메뉴로 강력하게 날아가는(Super Jump) 효과 구현.
5.  **마이페이지 '기억의 유리병' 시각화 구현.**
---
## 📅 2025년 11월 23일
### 주제: 메인 화면 UI/UX 대규모 개편 & 인터랙션 강화

사용자가 일기를 쓰는 행위에 더 깊이 몰입할 수 있도록, 메인 화면의 디자인 언어를 '디지털'에서 '아날로그 감성'으로 전면 교체하고, 저장 과정에 스토리텔링을 담았습니다.

#### 1. 펼쳐진 다이어리 (Book Spread Layout)
-   **문제:** 기존의 분리된 입력창(Left)과 결과창(Right)은 시선이 분산되고, '일기장'이라는 앱의 정체성을 시각적으로 전달하기 부족함.
-   **해결:** 화면 전체를 아우르는 **'펼쳐진 다이어리'** 형태의 레이아웃 도입.
-   **구현 디테일:**
    -   **Wide Layout:** `max-width: 1600px`, `min-width: 1200px`를 적용하여 실제 책상 위에 노트를 펼친 듯한 시원한 개방감 확보.
    -   **Clean UI:** 추천 콘텐츠가 길어질 경우 스크롤은 되지만 스크롤바(Bar)는 숨겨(`scrollbar-width: none`) 깔끔함 유지.
    -   **Line-clamp:** 추천 텍스트가 길어지면 `line-clamp`로 말줄임 처리하고, Hover 시 전체 내용을 보여주는 인터랙션 추가.

#### 2. '기억의 구슬' 저장 애니메이션 (Memory Orb & Bouncing)
-   **기획 의도:** 단순히 데이터를 서버로 전송(Submit)하는 것을 넘어, **"나의 소중한 하루가 기억의 구슬이 되어 보관된다"**는 메타포(영화 *인사이드 아웃* 모티브)를 전달하고자 함.
-   **애니메이션 시나리오:**
    1.  **응축 (Morph):** 저장 버튼 클릭 시, 거대했던 다이어리가 순식간에 작아지며 동그란 구슬로 변신.
    2.  **감정의 색:** AI가 분석한 감정(기쁨=노랑, 슬픔=파랑 등)에 맞춰 구슬의 색상이 실시간으로 변화.
    3.  **역동적 이동 (Bouncing):** 구슬이 바닥에 통통 튀기며(Squash & Stretch) 에너지를 모으다, 마지막에 메뉴(보관함) 쪽으로 슈웅 날아감.
-   **기술적 구현:**
    -   **Clone Node:** 원본 DOM을 건드리면 레이아웃이 깨지므로, `cloneNode`로 다이어리의 복제본을 생성하여 `fixed` 포지션으로 띄운 뒤 애니메이션 적용.
    -   **Keyframes:** `0%`~`100%` 구간을 세밀하게 나누어 위치 이동(`translate`)과 형태 변형(`scale`, `border-radius`)을 동시에 제어.

#### 🔜 Next Step
-   상단 내비게이션 바(Navbar)에 'Sliding Magic Line' 인터랙션 적용 예정.
-   마이페이지 '기억의 유리병' 시각화 구현.

---


## 📅 2025년 11월 21일 (UI/UX Refinement)

### Feature: 새로운 하단 내비게이션 바
-   기존 상단 헤더를 대체하는 새로운 SVG 기반 하단 내비게이션 바를 구현했습니다.
-   주요 기능인 '홈', '나의 일기', '마이페이지' 및 '로그아웃' 버튼을 포함합니다.
-   내비게이션 바는 사용자가 로그인했을 때만 표시되도록 설정했습니다.

### Refactor: 내비게이션 바 인터랙션 개선
-   **UI 스타일:** 흰색 배경, 어두운 색상의 아이콘 및 활성 페이지를 나타내는 '빛 효과(tubelight)'를 적용했습니다. 4개의 아이콘에 맞게 너비를 조정했습니다.
-   **위치 문제 해결 (CSS 기반 로직):** 페이지 로드 시 '빛 효과'의 위치가 어긋나는 문제를 해결하기 위해, 불안정한 JavaScript 타이밍 대신 CSS만으로 위치를 제어하는 방식으로 로직을 전면 수정했습니다.
    -   서버에서 현재 페이지 주소(`request.endpoint`)에 따라 `<nav>` 태그에 `active-main-home` 과 같은 동적 클래스를 부여합니다.
    -   CSS는 이 클래스를 사용하여 '빛 효과'의 초기 `left` 위치를 직접 지정하므로, 더 이상 렌더링 시점의 경쟁 상태(Race Condition) 문제가 발생하지 않습니다.
-   **애니메이션 피드백 (JS):** `navigation.js` 스크립트는 이제 초기 위치 계산을 전혀 하지 않고, 사용자가 아이콘을 클릭했을 때 시각적 피드백을 주기 위해 빛을 움직이는 단순한 역할만 수행하도록 대폭 축소했습니다.

### Feature: 페이지 전환 효과 (일시적 롤백)
-   부드러운 페이지 이동 경험을 위해 화면 전체를 덮는 '커튼' 방식의 전환 효과를 구현했습니다.
-   하지만 내비게이션 바 애니메이션과의 지속적인 충돌 및 불안정성 문제로, 사이트의 안정성을 확보하기 위해 이 기능은 **일시적으로 이전 상태로 되돌렸습니다.** 현재는 브라우저의 기본 탐색 방식을 사용합니다.

---

## 📅 2025년 11월 19일
### 주제: AI 모델 개선 실험 & 초기 UI/UX 구축

#### 1. AI 모델 개선 여정
**초기 모델의 한계와 새로운 아이디어**
-   **기존 모델 정확도:** `79.06%`로, 다소 아쉬운 성능.
-   **새로운 가설:** NSMC는 '긍정/부정' 분석에 특화되어 있어, 우리 프로젝트의 다중 감정 분류(대분류)에는 적합하지 않다고 판단. NSMC를 제거하고 수동 가중치로만 훈련했을 때, 오히려 **순정 모델의 성능이 가장 좋았음.**
-   **방향 전환:** 사용자에게 AI가 예측한 감정 확률을 보여주고, 가장 높은 확률의 감정을 기본으로 추천하되 **사용자가 직접 수정할 수 있는 선택권**을 제공하는 UX적 해결책 도입.

#### 2. UI/UX 개선 사항
**로그인/회원가입 UX 개선: Flip Animation**
-   **해결:** 로그인과 회원가입 화면을 **하나의 '책(Book)'** 콘셉트로 통합.
-   **구현:** CSS `transform: rotateY(180deg)`를 활용한 3D 책 넘김 애니메이션 및 단일 페이지 턴(Single Page Turn) 효과 적용.

**감정 분석 정확도 보완: Emotion Selection UI**
-   **해결:** AI의 **확신도(Confidence Score)**에 따라 UI를 유연하게 분기 처리.
    -   **확신 (80% 이상):** AI가 예측한 감정을 정답으로 자동 채택.
    -   **불확실 (80% 미만):** 상위 3개 감정과 확률을 **'감정 칩(Chips)'** 형태로 제안하여 선택권 부여.

**사용자 경험 보호: 분석과 저장 단계 분리**
-   **구현:** **`[분석] → [확인/수정] → [저장]`** 플로우 구축. 최종적으로 '저장하기' 버튼을 눌렀을 때만 DB에 저장되도록 변경하고 로딩 UI 추가.

#### 3. KOTE 사전 학습 모델 실험 결과
> Colab 환경에서 진행되었으며, 결과가 만족스럽지는 않았음.

-   **실험 1 (기본):** F1 Score `0.6154`
-   **실험 2 (가중치 적용):** Accuracy `54.2%`
-   **실험 3 (가중치 제거):** Accuracy `58.45%`
-   **결론:** KOTE 데이터셋을 활용한 사전 학습 모델은 아직 기대만큼의 성능을 보여주지 못함. 추후 개선 방향 재설정 필요.
